<h2 mat-dialog-title>{{data?'EDICION':'CREACION'}} CARGO</h2>
<mat-dialog-content class="mat-typography">
    <mat-tab-group>
        <form [formGroup]="FormJob">
            <mat-tab label="Datos">
                
                <div class="row">   
                    <div class="col-sm-8">
                        <mat-form-field class="example-full-width">
                            <mat-label>Nombre del cargo</mat-label>
                            <input formControlName="nombre" matInput>
                        </mat-form-field>
                    </div>
                    
                    <div class="col-sm-4">
                        <mat-checkbox formControlName="isRoot" matTooltip="Crear un nuevo organigrama">Superior</mat-checkbox>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <mat-form-field appearance="fill">
                            <mat-label>Secretar√≠a</mat-label>
                            <input formControlName="secretaria" matInput>
                        </mat-form-field>
                    </div>  
        
                    <div class="col-sm-4">
                        <mat-form-field>
                            <mat-label>Nivel</mat-label>
                             <mat-select (selectionChange)="nivelSeleccionado($event)" formControlName='nivel_id'>                                
                                    <mat-option *ngFor="let lev of niveles" [value]="lev._id">
                                        {{lev.nivel}}
                                    </mat-option>                                   
                            </mat-select>
                        </mat-form-field>
                    </div>  

                    
                    
                    <div class="col-sm-4">
                        <div class="row">
                            <mat-radio-group aria-label="Select an option" ng model formControlName="tipoContrato">
                                <mat-radio-button value="ITEM">Item</mat-radio-button>
                                <mat-radio-button value="CONTRATO">Eventual</mat-radio-button>
                              </mat-radio-group>
                        </div>               
                    </div>           
                </div>

                <div class="card">
                    <div class="card-body">
                      <h4 class="card-title">Estado del Cargo</h4>
                        <div class="row">
                                <div class="col-sm-12">
                                    <mat-chip-listbox ng model formControlName="estado">
                                        <mat-chip-option [style.background]="'rgb(221, 226, 205)'" value="ITEM">Item</mat-chip-option>
                                        <mat-chip-option [style.background]="'rgb(147, 205, 221)'" value="EVENTUAL">Eventual</mat-chip-option>
                                        <mat-chip-option [style.background]="'rgb(183, 253, 113)'" value="ASCENSO">Ascenso</mat-chip-option>
                                        <mat-chip-option [style.background]="'rgb(121, 149, 64)'" value="CREACION">Creacion</mat-chip-option>
                                        <mat-chip-option [style.background]="'rgb(255, 255, 0)'" value="REUBICACION">Reubicacion</mat-chip-option>
                                        <mat-chip-option [style.background]="'rgb(242, 220, 218)'" value="DESCENSO">Descenso</mat-chip-option>
                                        <mat-chip-option [style.background]="'rgb(255, 128, 0)'" value="DENOMINACION">Denominacion</mat-chip-option>
                                        <mat-chip-option [style.background]="'rgb(255, 0, 0)'" value="ELIMINACION">Eliminacion</mat-chip-option>
                                    </mat-chip-listbox>
                                </div>
                        </div>
                    </div>
                  </div>
                
                
                
        </mat-tab>

        <mat-tab label="Organigrama"> 
            <div class="row">
                <div class="card bg-transparent">
                    <div class="card-header">Cargo superior </div>
                        <div class="card-body">
                            <div class="row">
                                <div *ngIf="!noJob" class="col-sm-8">
                                    <app-sever-mat-select [initialValue]="data?data.superior:null"
                                        [placeholder]="'Buscar cargo superior'" [pathPropertyOfObjectDisplay]="'nombre'"
                                        [data]="availableJobs" (eventSelectedOption)="selectJob($event)"
                                        (eventSearch)="searchJob($event)"></app-sever-mat-select>
                                </div>
                            <div class="col-sm-3">
                                <mat-checkbox (change)="removeJob()" [(ngModel)]="noJob" [ngModelOptions]="{standalone:true}" class="example-margin">Sin
                                    cargo superior</mat-checkbox>
                            </div>
                        </div>
                    </div>  

                    <div class="card-header">Cargos dependientes</div>
                        <div class="card-body">
                            <div class="row">
                                <app-sever-mat-select [placeholder]="'Buscar cargos dependientes'" [data]="jobs"
                                    (eventSelectedOption)="selectDependents($event)" [pathPropertyOfObjectDisplay]="'nombre'"
                                    (eventSearch)="searchDependents($event)"></app-sever-mat-select>
                            </div>
                
                            <div class="row">
                                <div class="col-sm-12">
                                    <mat-list>
                                        <mat-list-item *ngIf="dependentJobs.length===0">
                                            Sin dependientes
                                        </mat-list-item>
                                        <mat-list-item *ngFor="let folder of dependentJobs; let i=index">
                                            <div mat-subheader>Cargos</div>
                                            <div matListItemTitle>{{folder.nombre}}</div>
                                            <button (click)="removeDependentJob(i)" mat-icon-button matListItemMeta>
                                                <mat-icon>delete</mat-icon>
                                            </button>
                                            <mat-divider></mat-divider>
                                        </mat-list-item>
                                    </mat-list>
                                </div>
                            </div>
                        </div>      
                    </div>
                </div>            
        </mat-tab>  
    </form>        
   


    <mat-tab *ngIf="FormJob.get('tipoContrato')?.value=='CONTRATO'" label="Detalle Contrato">
            <form [formGroup]="FormJobDetail">
                <div>
                    <div class="col-sm-12">
                        <mat-form-field class="example-full-width">
                            <mat-label>Partida Presupuestaria</mat-label>
                            <input formControlName="partidaPresupuestaria" matInput>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-12">
                        <mat-form-field>
                            <mat-label>Partidas</mat-label>
                             <mat-select (selectionChange)="nivelSeleccionado($event)" formControlName='nivel_id'>                                
                                    <mat-option *ngFor="let lev of partidas" [value]="lev._id">
                                        {{lev.nivel}}
                                    </mat-option>                                   
                            </mat-select>
                        </mat-form-field>
                    </div>
                
                    <div class="col-sm-12">
                        <mat-form-field class="example-full-width">
                            <mat-label>Objetivo del Puesto</mat-label>
                            <input formControlName="objetivoPuesto" matInput>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <mat-form-field appearance="fill">
                            <mat-label>Denominacion del Puesto</mat-label>
                            <input formControlName="denominacionPuesto" matInput>
                        </mat-form-field>
                    </div>  
    
                    <div class="col-sm-4">
                        <mat-form-field appearance="fill">
                            <mat-label>Tipo de Gasto</mat-label>
                            <input formControlName="tipoGasto" matInput>
                        </mat-form-field>
                    </div>
    
                    <div class="col-sm-4">
                        <mat-form-field appearance="fill">
                            <mat-label>Numero de Casos</mat-label>
                            <input formControlName="casos" matInput>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <mat-form-field appearance="fill">
                            <mat-label>Fuente de Financiamiento</mat-label>
                            <input formControlName="fuenteFinanciamiento" matInput>
                        </mat-form-field>
                    </div>  
    
                    <div class="col-sm-4">
                        <mat-form-field appearance="fill">
                            <mat-label>Organismo Financiador</mat-label>
                            <input formControlName="organismoFinanciador" matInput>
                        </mat-form-field>
                    </div>
    
                    <div class="col-sm-4">
                        <mat-form-field appearance="fill">
                            <mat-label>Duracion de Contrato</mat-label>
                            <input formControlName="duracionContrato" matInput>
                        </mat-form-field>
                    </div>
                </div>
            </form>
        </mat-tab> 
        
      </mat-tab-group>
    
</mat-dialog-content>
<mat-dialog-actions align="end">
    <button mat-flat-button color="warn" mat-dialog-close>Cancelar</button>
    <button mat-flat-button color="primary" (click)="save()">Aceptar</button>
</mat-dialog-actions>